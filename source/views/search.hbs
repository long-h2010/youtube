<link rel="stylesheet" href="/stylesheets/search.css">

<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-12 col-md-9 p-0">
            {{#each channels}}
            {{!-- Channel card --}}
            <div class="d-flex mt-3">
                <a class="text-decoration-none col-5 p-0" href="/channel/{{meta}}">
                    {{!-- Channel avatar --}}
                    <div class="text-center">
                        <img class="rounded-circle" src="/uploads/avatars/{{avatar_path}}" alt="UserAvatar" width="150px" height="150px">
                    </div>
                </a>
                <div class="d-flex col-7">
                    <a class="d-flex text-decoration-none" href="/channel/{{meta}}">
                        {{!-- Channel name, meta and subscribe count --}}
                        <div class="d-flex flex-column">
                            <div class="text-dark font-weight-bold mt-auto" title="{{name}}">{{name}}</div>
                            <div class="text-gray text-wrap mt-2 mb-auto">{{meta}} • {{readableNumber subscriber_count}} người đăng ký</div>
                        </div>
                    </a>
                    {{!-- Subscribe button --}}
                    {{!-- <div class="d-flex align-items-center ml-auto">
                        <button data-id="channel-id" class="rounded-pill border-0 bg-dark text-white px-2 h-30">Đăng ký</button>
                    </div> --}}
                </div>
            </div>
            {{/each}}

            {{#each videos}}
            {{!-- Video card --}}
            <div class="d-flex mt-3">
                {{!-- Video thumbnail --}}
                <div class="video-card-image col-5 p-0">
                    <a class="play-icon" href="/watch?v={{id}}"><i class="fa fa-play-circle"></i></a>
                    <a href="/watch?v={{id}}"><img class="border-radius-2" src="uploads/thumbnails/{{thumbnail}}" alt="Thumbnail" width="100%" height="160px"></a>
                    <div class="time">{{length}}</div>
                </div>
                <div class="video-card-infor col-7">
                    {{!-- Video title --}}
                    <a class="overflow-ellipsis-2 text-decoration-none text-dark font-weight-bold" href="/watch?v={{id}}" title="{{title}}">{{title}}</a>
                    {{!-- View and upload date --}}
                    <div class="overflow-ellipsis-1">{{readableNumber view_count}} lượt xem &nbsp;<i class="fas fa-calendar-alt"></i> {{dateAgo datebegin}}</div>
                    {{!-- Channel avatar, name --}}
                    <div class="d-flex my-2">
                        <a href="/channel/{{meta}}"><img class="rounded-circle" src="/uploads/avatars/{{avatar_path}}" alt="UserAvatar" width="24px" height="24px"></a>
                        <a class="overflow-ellipsis-1 text-decoration-none text-danger ml-2" href="/channel/{{meta}}" title="{{name}}">{{name}}</a>
                    </div>
                    {{!-- Description --}}
                    <div class="overflow-ellipsis-1">{{description}}</div>
                </div>
            </div>
            {{/each}}

        </div>
    </div>
</div>

<script>
    // Set search input as current search query
    $('#searchQuery').val(new URLSearchParams(window.location.search).get('search_query'));
</script>